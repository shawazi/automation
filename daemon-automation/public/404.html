<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      (function() {
        var loc = window.location;
        var path = loc.pathname;
        var search = loc.search;
        var hash = loc.hash;

        // Clean up the path
        path = path.replace(/\/+/g, '/');

        if (path !== '/') {
          // Preserve only the first occurrence of any parameter
          var searchParams = new URLSearchParams(search);
          var cleanParams = new Map();
          
          searchParams.forEach((value, key) => {
            if (!cleanParams.has(key)) {
              cleanParams.set(key, value);
            }
          });

          var newSearch = Array.from(cleanParams.entries())
            .map(([key, value]) => `${key}=${value}`)
            .join('&');

          // Construct the new URL
          var newUrl = '/' + (newSearch ? '?' + newSearch : '') + hash;
          window.location.replace(newUrl);
        }
      })();
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>
